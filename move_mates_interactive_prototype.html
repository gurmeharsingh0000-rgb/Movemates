<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Move Mates — Interactive Prototype</title>
  <style>
    :root{--bg:#f6fbfb;--card:#ffffff;--accent:#0f766e;--accent-2:#06b6d4;--muted:#6b7280}
    *{box-sizing:border-box}
    body{font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;margin:0;background:var(--bg);color:#062a2a}
    header{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#fff;padding:18px 16px;display:flex;align-items:center;gap:12px}
    header h1{font-size:1.1rem;margin:0}
    .app{max-width:980px;margin:18px auto;padding:12px}
    .device{background:linear-gradient(180deg,#ffffffcc,#ffffff);border-radius:18px;box-shadow:0 10px 30px rgba(6,22,22,.08);overflow:hidden;display:flex}
    .pane{width:360px;min-height:640px;background:var(--card)}

    /* top nav inside device */
    .topbar{padding:12px 14px;border-bottom:1px solid #eef6f6;display:flex;align-items:center;justify-content:space-between}
    .logo{display:flex;gap:10px;align-items:center}
    .logo .icon{width:38px;height:38px;border-radius:8px;background:linear-gradient(45deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;color:#fff;font-weight:800}
    .screen{padding:16px}
    h2{margin:6px 0}
    p.small{color:var(--muted);font-size:.92rem}

    /* Home cards */
    .card{background:#fff;padding:12px;border-radius:12px;margin-bottom:12px;border:1px solid #f0f6f6}
    .btn{background:var(--accent);color:#fff;border:0;padding:10px 12px;border-radius:10px;font-weight:700;cursor:pointer}
    .btn.ghost{background:transparent;border:1px solid var(--accent);color:var(--accent)}

    .progress-wrap{display:flex;gap:10px;align-items:center}
    .progress{flex:1;height:14px;background:#eef6f6;border-radius:12px;overflow:hidden}
    .progress > i{display:block;height:100%;background:linear-gradient(90deg,var(--accent),var(--accent-2));width:0%}

    .grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .challenge{padding:10px;border-radius:10px;background:linear-gradient(180deg,#f9fffd,#f2fffb);border:1px solid #e8f7f6}

    /* screens */
    .hidden{display:none}
    .nav{display:flex;gap:6px;justify-content:space-around;padding:12px;border-top:1px solid #eef6f6}
    .nav button{flex:1}

    /* leaderboard */
    .list{list-style:none;padding:0;margin:0}
    .list li{display:flex;justify-content:space-between;padding:8px 6px;border-bottom:1px dashed #eef7f7}

    /* badges */
    .badges{display:flex;gap:8px;flex-wrap:wrap}
    .badge{background:linear-gradient(90deg,#fff0,#e6fffb);padding:8px;border-radius:10px;border:1px solid #dff6f5;font-weight:700}

    /* layout helpers */
    .row{display:flex;gap:8px;align-items:center}
    input,select{padding:8px;border-radius:8px;border:1px solid #e8f0f0;width:100%}

    /* responsive */
    @media (max-width:420px){.device{transform:scale(.9);transform-origin:top center}}
  </style>
</head>
<body>
  <header>
    <div style="display:flex;align-items:center;gap:12px">
      <div style="width:42px;height:42px;border-radius:10px;background:linear-gradient(45deg,#0f766e,#06b6d4);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:800">MM</div>
      <div>
        <h1 style="margin:0">Move Mates — Interactive Prototype</h1>
        <div style="font-size:.86rem;opacity:.9">Clickable mobile prototype for your portfolio &amp; expo</div>
      </div>
    </div>
    <div style="margin-left:auto;color:#fff;opacity:.95;font-weight:700">Demo</div>
  </header>

  <div class="app">
    <div class="device">
      <div class="pane" id="pane">
        <!-- topbar -->
        <div class="topbar">
          <div class="logo"><div class="icon">MM</div><div style="font-weight:800">Move Mates</div></div>
          <div style="text-align:right"><div id="userNameDisplay">Guest</div><div style="font-size:.8rem;color:var(--muted)" id="userAgeDisplay"></div></div>
        </div>

        <!-- screens -->
        <div id="home" class="screen">
          <h2>Daily Challenge</h2>
          <p class="small">Complete 30 minutes of movement today to earn a badge!</p>

          <div class="card">
            <div class="row" style="justify-content:space-between;align-items:flex-start">
              <div>
                <div style="font-size:.95rem;font-weight:800" id="todayChallengeTitle">Walk 3 km</div>
                <div class="small muted" id="todayChallengeDesc">Beginner • Walk in the park</div>
              </div>
              <div style="text-align:right">
                <div style="font-weight:800;font-size:1.2rem" id="stepsCount">0</div>
                <div class="small">steps</div>
              </div>
            </div>

            <div style="margin-top:12px" class="progress-wrap">
              <div class="progress" aria-hidden><i id="progressBar"></i></div>
              <div style="width:56px;text-align:center;font-weight:700" id="progressPercent">0%</div>
            </div>

            <div style="margin-top:12px;display:flex;gap:8px">
              <button class="btn" id="startBtn">Start Activity</button>
              <button class="btn ghost" id="completeBtn">Complete Challenge</button>
            </div>
          </div>

          <div class="card">
            <h3 style="margin:0 0 8px 0">Quick actions</h3>
            <div class="grid">
              <div>
                <button class="btn" id="goMap">Map routes</button>
              </div>
              <div>
                <button class="btn ghost" id="openBuddy">Buddy system</button>
              </div>
            </div>
          </div>

          <div class="card">
            <h3 style="margin:0 0 8px 0">Badges</h3>
            <div class="badges" id="badgesArea">
              <!-- badges go here -->
            </div>
          </div>
        </div>

        <div id="routes" class="screen hidden">
          <h2>Routes &amp; Map (simulated)</h2>
          <p class="small">Select a nearby route or create your own. This demo simulates steps and distance.</p>
          <div class="card">
            <label>Choose a route</label>
            <select id="routeSelect">
              <option value="park">Park Loop — 3.0 km</option>
              <option value="river">Riverside Trail — 2.2 km</option>
              <option value="bike">Bike Path — 5.0 km</option>
            </select>
            <div style="margin-top:10px;display:flex;gap:8px">
              <button class="btn" id="startRouteBtn">Start Route</button>
              <button class="btn ghost" id="backFromMap">Back</button>
            </div>
          </div>
        </div>

        <div id="leaderboard" class="screen hidden">
          <h2>Leaderboard</h2>
          <p class="small">Top local Move Mates this week</p>
          <div class="card">
            <ul class="list" id="leaderList"></ul>
            <div style="margin-top:10px;display:flex;gap:8px">
              <input id="addName" placeholder="Your name" />
              <button class="btn" id="addScoreBtn">Add / Update</button>
            </div>
          </div>
        </div>

        <div id="buddy" class="screen hidden">
          <h2>Buddy System</h2>
          <p class="small">Add friends and challenge them to move together.</p>
          <div class="card">
            <label>Add friend username</label>
            <div style="display:flex;gap:8px;margin-top:8px">
              <input id="friendName" placeholder="Friend name" />
              <button class="btn" id="addFriendBtn">Add</button>
            </div>
            <h4 style="margin-top:12px">Friends</h4>
            <ul id="friendsList" class="list"></ul>
          </div>
        </div>

        <div id="settings" class="screen hidden">
          <h2>Settings</h2>
          <div class="card">
            <label>Your name</label>
            <input id="nameInput" placeholder="Type your name" />
            <label style="margin-top:8px">Age</label>
            <input id="ageInput" placeholder="e.g. 12" />
            <div style="margin-top:10px;display:flex;gap:8px">
              <button class="btn" id="saveProfile">Save</button>
              <button class="btn ghost" id="clearData">Reset Demo</button>
            </div>
          </div>

          <div class="card">
            <h4>Parental Access</h4>
            <p class="small">Enable to view child's progress &amp; approve rewards.</p>
            <div style="display:flex;gap:8px;margin-top:8px">
              <button class="btn" id="toggleParent">Enable Parent View</button>
            </div>
          </div>
        </div>

        <!-- bottom nav -->
        <div class="nav">
          <button class="btn" data-to="home">Home</button>
          <button class="btn ghost" data-to="routes">Routes</button>
          <button class="btn ghost" data-to="leaderboard">Leaderboard</button>
          <button class="btn ghost" data-to="buddy">Buddies</button>
          <button class="btn ghost" data-to="settings">Profile</button>
        </div>
      </div>

      <!-- right preview / info pane -->
      <div style="width:620px;padding:18px;background:linear-gradient(180deg,#ffffff,#f8ffff);">
        <div style="max-width:560px;margin:0 auto">
          <h2>Prototype controls &amp; notes</h2>
          <p class="small">This is a running web prototype of Move Mates. It simulates activity, awards badges, and stores data in your browser.</p>

          <div class="card">
            <h3>Simulate activity</h3>
            <p class="small">Use the Start Activity button to simulate walking. Steps increase every second.</p>
            <div style="display:flex;gap:8px">
              <button class="btn" id="simStart">Sim: Start</button>
              <button class="btn ghost" id="simStop">Sim: Stop</button>
              <button class="btn ghost" id="addSteps100">+100 steps</button>
            </div>
          </div>

          <div class="card">
            <h3>Challenge editor</h3>
            <label>Title</label>
            <input id="editTitle" placeholder="e.g. Walk 3 km" />
            <label style="margin-top:8px">Description</label>
            <input id="editDesc" placeholder="e.g. Beginner • Walk in the park" />
            <div style="margin-top:8px;display:flex;gap:8px">
              <button class="btn" id="saveChallenge">Save challenge</button>
              <button class="btn ghost" id="resetChallenge">Reset</button>
            </div>
          </div>

          <div class="card">
            <h3>Prototype tips</h3>
            <ol class="small muted">
              <li>Save your name &amp; age in Profile — shown in the top bar.</li>
              <li>Start Activity to simulate steps. Complete a challenge to earn a badge.</li>
              <li>Leaderboard &amp; friends are stored locally (clear demo to reset).</li>
            </ol>
          </div>

          <div class="card">
            <h3>Export / presentation</h3>
            <p class="small">To show this during your Expo, open the file in Chrome and click Start Activity. Use the right pane to control the demo.</p>
            <div style="display:flex;gap:8px;margin-top:8px">
              <button class="btn" id="exportJSON">Export Data</button>
              <button class="btn ghost" id="importJSON">Import Data</button>
            </div>
            <input type="file" id="importFile" style="display:none" accept="application/json" />
          </div>

          <div class="card">
            <h3>Notes for assessment</h3>
            <p class="small muted">This prototype focuses on core UX: motivation loops (challenges &amp; badges), social (buddies &amp; leaderboard), and simple progress tracking. For full app: add GPS integration, backend, and secure sign-in.</p>
          </div>

        </div>
      </div>
    </div>
  </div>

  <script>
    // --- State & storage helpers ---
    const state = {
      steps: 0,
      running: false,
      intervalId: null,
      challenge: {title:'Walk 3 km', desc:'Beginner • Walk in the park', targetSteps:3000},
      badges: [],
      friends: [],
      leaderboard: []
    };

    function saveState(){
      localStorage.setItem('mm_prototype', JSON.stringify(state));
    }
    function loadState(){
      const raw = localStorage.getItem('mm_prototype');
      if(raw) Object.assign(state, JSON.parse(raw));
    }
    loadState();

    // --- UI refs ---
    const stepsCount = document.getElementById('stepsCount');
    const progressBar = document.getElementById('progressBar');
    const progressPercent = document.getElementById('progressPercent');
    const startBtn = document.getElementById('startBtn');
    const completeBtn = document.getElementById('completeBtn');
    const simStart = document.getElementById('simStart');
    const simStop = document.getElementById('simStop');
    const addSteps100 = document.getElementById('addSteps100');
    const badgesArea = document.getElementById('badgesArea');
    const leaderList = document.getElementById('leaderList');
    const addScoreBtn = document.getElementById('addScoreBtn');
    const addName = document.getElementById('addName');
    const friendsList = document.getElementById('friendsList');
    const friendName = document.getElementById('friendName');

    // profile
    const nameInput = document.getElementById('nameInput');
    const ageInput = document.getElementById('ageInput');
    const saveProfile = document.getElementById('saveProfile');
    const userNameDisplay = document.getElementById('userNameDisplay');
    const userAgeDisplay = document.getElementById('userAgeDisplay');

    // challenge editor
    const editTitle = document.getElementById('editTitle');
    const editDesc = document.getElementById('editDesc');
    const saveChallenge = document.getElementById('saveChallenge');
    const resetChallenge = document.getElementById('resetChallenge');

    // import/export
    const exportJSON = document.getElementById('exportJSON');
    const importJSON = document.getElementById('importJSON');
    const importFile = document.getElementById('importFile');

    // UI initial render
    function render(){
      stepsCount.textContent = state.steps;
      const pct = Math.min(100, Math.round((state.steps / state.challenge.targetSteps) * 100));
      progressBar.style.width = pct + '%';
      progressPercent.textContent = pct + '%';
      document.getElementById('todayChallengeTitle').textContent = state.challenge.title;
      document.getElementById('todayChallengeDesc').textContent = state.challenge.desc;

      // badges
      badgesArea.innerHTML = '';
      state.badges.forEach(b=>{
        const el = document.createElement('div'); el.className='badge'; el.textContent = b; badgesArea.appendChild(el);
      });

      // friends
      friendsList.innerHTML = '';
      state.friends.forEach(f=>{const li=document.createElement('li'); li.textContent = f; friendsList.appendChild(li)});

      // leaderboard
      leaderList.innerHTML = '';
      const data = (state.leaderboard || []).slice().sort((a,b)=>b.steps-a.steps);
      data.forEach((r,i)=>{
        const li = document.createElement('li'); li.innerHTML = `<strong>${i+1}. ${r.name}</strong><span>${r.steps} steps</span>`; leaderList.appendChild(li);
      });

      // profile
      const profileRaw = localStorage.getItem('mm_profile');
      if(profileRaw){const p=JSON.parse(profileRaw);userNameDisplay.textContent=p.name||'Guest';userAgeDisplay.textContent=p.age?('Age '+p.age):''}
    }
    render();

    // --- Activity simulation ---
    function tick(){ state.steps += Math.floor(Math.random()*20)+10; render(); saveState(); }
    function startSim(){ if(state.running) return; state.running=true; state.intervalId = setInterval(tick,1000); }
    function stopSim(){ state.running=false; clearInterval(state.intervalId); state.intervalId=null; }

    simStart.addEventListener('click', startSim);
    simStop.addEventListener('click', stopSim);
    addSteps100.addEventListener('click', ()=>{ state.steps+=100; render(); saveState(); });

    startBtn.addEventListener('click', ()=>{
      startSim(); startBtn.textContent='Running...'; startBtn.disabled=true;
      setTimeout(()=>{ startBtn.textContent='Start Activity'; startBtn.disabled=false; }, 1200);
    });

    completeBtn.addEventListener('click', ()=>{
      // complete challenge if steps reached or force-complete
      if(state.steps >= state.challenge.targetSteps){
        awardBadge(state.challenge.title+' ✓');
        alert('Challenge completed! You earned a badge.');
      } else {
        const proceed = confirm('You haven\'t reached the target yet. Mark as complete?');
        if(proceed){ awardBadge(state.challenge.title+' (manual)'); }
      }
      // update leaderboard for demo
      const profileRaw = localStorage.getItem('mm_profile');
      const name = profileRaw? JSON.parse(profileRaw).name : 'Guest';
      updateLeaderboard(name, state.steps);
    });

    function awardBadge(name){ if(!state.badges.includes(name)) state.badges.push(name); saveState(); render(); }

    // --- Leaderboard ---
    function updateLeaderboard(name, steps){
      const existing = state.leaderboard.find(r=>r.name===name);
      if(existing) existing.steps = Math.max(existing.steps, steps); else state.leaderboard.push({name,steps});
      saveState(); render();
    }
    addScoreBtn.addEventListener('click', ()=>{
      const n = addName.value.trim()||'Guest'; updateLeaderboard(n, state.steps); addName.value='';
      alert('Leaderboard updated for '+n);
    });

    // --- Friends ---
    document.getElementById('addFriendBtn').addEventListener('click', ()=>{
      const f = friendName.value.trim(); if(!f) return alert('Type a friend name'); state.friends.push(f); friendName.value=''; saveState(); render();
    });

    // --- Profile ---
    saveProfile.addEventListener('click', ()=>{
      const p = {name: nameInput.value.trim()||'Guest', age: parseInt(ageInput.value)||''};
      localStorage.setItem('mm_profile', JSON.stringify(p)); render(); alert('Profile saved');
    });

    document.getElementById('clearData').addEventListener('click', ()=>{
      if(confirm('Reset all prototype demo data?')){ localStorage.removeItem('mm_prototype'); localStorage.removeItem('mm_profile'); location.reload(); }
    });

    // --- Challenge editor ---
    editTitle.value = state.challenge.title; editDesc.value = state.challenge.desc;
    saveChallenge.addEventListener('click', ()=>{
      state.challenge.title = editTitle.value || state.challenge.title;
      state.challenge.desc = editDesc.value || state.challenge.desc;
      // adjust target heuristically
      if(/\d+\s?km/i.test(state.challenge.title)){
        const m = state.challenge.title.match(/(\d+(?:\.\d+)?)\s?km/i);
        if(m) state.challenge.targetSteps = Math.round(parseFloat(m[1])*1250); // ~1250 steps per km
      }
      saveState(); render(); alert('Challenge saved');
    });
    resetChallenge.addEventListener('click', ()=>{ state.challenge = {title:'Walk 3 km',desc:'Beginner • Walk in the park',targetSteps:3000}; editTitle.value=state.challenge.title; editDesc.value=state.challenge.desc; saveState(); render(); });

    // --- Routes screen ---
    document.getElementById('goMap').addEventListener('click', ()=>navTo('routes'));
    document.getElementById('backFromMap').addEventListener('click', ()=>navTo('home'));
    document.getElementById('startRouteBtn').addEventListener('click', ()=>{
      const route = document.getElementById('routeSelect').value;
      // choose a route distance
      const dist = route==='park'?3.0:route==='river'?2.2:5.0;
      const estSteps = Math.round(dist*1250);
      state.challenge.title = `Route: ${dist} km`;
      state.challenge.desc = `Follow the ${route} route`;
      state.challenge.targetSteps = estSteps;
      saveState(); render(); navTo('home'); alert('Route started. Simulate activity to progress.');
    });

    // --- import/export ---
    exportJSON.addEventListener('click', ()=>{
      const data = JSON.stringify(state, null, 2);
      const blob = new Blob([data], {type:'application/json'}); const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href=url; a.download='move-mates-demo.json'; a.click(); URL.revokeObjectURL(url);
    });
    importJSON.addEventListener('click', ()=>importFile.click());
    importFile.addEventListener('change', (e)=>{
      const f = e.target.files[0]; if(!f) return; const reader = new FileReader(); reader.onload = ()=>{ try{ const obj = JSON.parse(reader.result); Object.assign(state, obj); saveState(); render(); alert('Imported demo data'); }catch(err){alert('Invalid file')} }; reader.readAsText(f);
    });

    // --- navigation ---
    function navTo(id){ document.querySelectorAll('.screen').forEach(s=>s.classList.add('hidden')); document.getElementById(id).classList.remove('hidden'); }
    document.querySelectorAll('.nav button').forEach(b=>{ b.addEventListener('click', ()=>{ navTo(b.dataset.to); }) });
    document.getElementById('openBuddy').addEventListener('click', ()=>navTo('buddy'));

    // click handlers for quick UI
    document.getElementById('editTitle').addEventListener('input', ()=>{});

    // --- initial sync ---
    render();

    // autosave profile to show top bar
    setInterval(()=>{ const p = localStorage.getItem('mm_profile'); if(p){const obj=JSON.parse(p); userNameDisplay.textContent=obj.name||'Guest'; userAgeDisplay.textContent=obj.age?('Age '+obj.age):'' } },800);

    // save state periodically
    setInterval(saveState,2000);

  </script>
</body>
</html>
